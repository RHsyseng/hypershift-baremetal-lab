= HyperShift Installation
include::_attributes.adoc[]
:profile: telco-hypershift-baremetal-lab

In this section, we install Hypershift

Launch the following command:

```
kcli create app openshift multicluster-engine
```

Expected Output

```
Adding app multicluster-engine
namespace/multicluster-engine created
operatorgroup.operators.coreos.com/multicluster-engine-operatorgroup created
subscription.operators.coreos.com/multicluster-engine created
Waiting for CRD MultiClusterEngine to be created
Waiting for CRD MultiClusterEngine to be created
Waiting for CRD MultiClusterEngine to be created
Waiting for CRD MultiClusterEngine to be created
multiclusterengine.multicluster.openshift.io/multiclusterengine created
multiclusterengine.multicluster.openshift.io/multiclusterengine condition met
pod/metal3-588c57c846-wgb9j condition met
clusterimageset.hive.openshift.io/openshift-v4.13 created
configmap/assisted-service-config created
agentserviceconfig.agent-install.openshift.io/agent created
secret/assisted-deployment-ssh-private-key created
secret/assisted-deployment-pull-secret created
```

This performs the following tasks:

* Craft proper namespace, operatorgroup and subscription of the multicluster engine from package manifest
* Wait for MultiClusterEngine CRD
* Create a multiclusterengine CR with the hypershift add on enabled
* Define a provisioning CR to make sure metal3 operator is running
* Create the proper configuration for the assisted service

We can check the pods deployed by using

```
oc get pod -n multicluster-engine
```

Expected Output

```
multicluster-engine                                agentinstalladmission-78464dd777-bdwgf                                1/1     Running            0               11m
multicluster-engine                                agentinstalladmission-78464dd777-fr7rt                                1/1     Running            0               11m
multicluster-engine                                assisted-image-service-0                                              1/1     Running            0               11m
multicluster-engine                                assisted-service-6769dff9b9-cng9b                                     2/2     Running            0               11m
multicluster-engine                                cluster-curator-controller-55976b8d7d-dzc2j                           1/1     Running            0               13m
multicluster-engine                                cluster-curator-controller-55976b8d7d-stf6x                           1/1     Running            0               13m
multicluster-engine                                cluster-image-set-controller-6447fc7b6d-tksb9                         1/1     Running            0               13m
multicluster-engine                                cluster-manager-65b886b48-8hz4v                                       1/1     Running            0               13m
multicluster-engine                                cluster-manager-65b886b48-8z5fq                                       1/1     Running            0               13m
multicluster-engine                                cluster-manager-65b886b48-sg98x                                       1/1     Running            0               13m
multicluster-engine                                cluster-proxy-addon-manager-6b8575dc55-cljxd                          1/1     Running            0               12m
multicluster-engine                                cluster-proxy-addon-manager-6b8575dc55-g78wg                          1/1     Running            0               12m
multicluster-engine                                cluster-proxy-addon-user-8c9cb664b-78bvd                              2/2     Running            0               12m
multicluster-engine                                cluster-proxy-addon-user-8c9cb664b-pndlg                              2/2     Running            0               12m
multicluster-engine                                cluster-proxy-c6f9ff875-9fqlt                                         1/1     Running            0               12m
multicluster-engine                                cluster-proxy-c6f9ff875-kdr74                                         1/1     Running            0               12m
multicluster-engine                                clusterclaims-controller-66b6748d7d-n9vsp                             2/2     Running            0               13m
multicluster-engine                                clusterclaims-controller-66b6748d7d-tmwhq                             2/2     Running            0               13m
multicluster-engine                                clusterlifecycle-state-metrics-v2-6c64ddf44b-59xx6                    1/1     Running            0               13m
multicluster-engine                                console-mce-console-5f4886bd56-lhkmm                                  1/1     Running            0               13m
multicluster-engine                                console-mce-console-5f4886bd56-plpr7                                  1/1     Running            0               13m
multicluster-engine                                discovery-operator-86d4f65f76-ks8ml                                   1/1     Running            0               13m
multicluster-engine                                hive-operator-6667956b88-plqvm                                        1/1     Running            0               13m
multicluster-engine                                hypershift-addon-manager-78f84b794c-ggssq                             1/1     Running            0               13m
multicluster-engine                                hypershift-cli-download-6695fcf9c-hwwh8                               1/1     Running            0               12m
multicluster-engine                                infrastructure-operator-5d88f5677f-2rxrk                              1/1     Running            0               13m
multicluster-engine                                managedcluster-import-controller-v2-6f556c9555-j8f6v                  1/1     Running            0               13m
multicluster-engine                                managedcluster-import-controller-v2-6f556c9555-s867f                  1/1     Running            0               13m
multicluster-engine                                multicluster-engine-operator-bbf4f7645-btv24                          1/1     Running            0               13m
multicluster-engine                                multicluster-engine-operator-bbf4f7645-q6rm7                          1/1     Running            0               13m
multicluster-engine                                ocm-controller-689c99d59c-55xmh                                       1/1     Running            0               13m
multicluster-engine                                ocm-controller-689c99d59c-xmxbl                                       1/1     Running            0               13m
multicluster-engine                                ocm-proxyserver-6f4f7d487-l9rl4                                       1/1     Running            0               13m
multicluster-engine                                ocm-proxyserver-6f4f7d487-xrb2n                                       1/1     Running            0               13m
multicluster-engine                                ocm-webhook-769f6c7f7d-6ct8h                                          1/1     Running            0               13m
multicluster-engine                                ocm-webhook-769f6c7f7d-pgswn                                          1/1     Running            0               13m
multicluster-engine                                provider-credential-controller-77647dbcdc-4zftp                       2/2     Running            0               13m
```

Hypershift operator was also deployed in its own namespace

```
oc get pod -n hypershift
```

Expected Output

```
NAME                        READY   STATUS    RESTARTS   AGE
operator-599cfcffc5-6gbbv   1/1     Running   0          19m
operator-599cfcffc5-tx6dd   1/1     Running   0          19m
```
